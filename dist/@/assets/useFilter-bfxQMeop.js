import{d as C}from"./Layout-mxREdH8E.js";import{r as o}from"./index-CjXOYCek.js";const Y=m=>{const[S,A]=o.useState(""),[c,F]=o.useState(""),[w,k]=o.useState(""),[g,B]=o.useState(""),[E,O]=o.useState([]),[P,K]=o.useState(!1),y=o.useRef(""),L=o.useRef(""),v=o.useRef(""),b=o.useRef(""),[f,j]=o.useState(""),[u,R]=o.useState("asc"),[d,x]=o.useState({startDate:null,endDate:null}),[D,z]=o.useState(""),T=o.useMemo(()=>{let n=m==null?void 0:m.map(s=>{const t=new Date(s==null?void 0:s.createdAt).toLocaleString("en-US",{timeZone:"Asia/Kolkata"});return{...s,updatedDate:t==="Invalid Date"?"":t}});if(S){const s=S.split(",").map(t=>t.trim().toLowerCase().replace(/\s+/g,"")).filter(t=>t.length>0);n=n.filter(t=>s.every(i=>{const e=a=>!a&&a!==0?!1:String(a).toLowerCase().replace(/\s+/g,"").includes(i);return e(t.name)||e(t.mobileNo)||e(t.whatsappNo)||e(t.source)||e(t.gender)||e(t.experience)||e(t.qualification)||e(t.state)||e(t.city)||e(t.locality)||e(t.salaryExpectation)||e(t.communication)||e(t.noticePeriod)||e(t.shift)||e(t.relocation)||e(t.companyProfile)||e(t.callStatus)||e(t.callSummary)||e(t.callDuration)||e(t.lineupCompany)||e(t.lineupProcess)||e(t.lineupDate)||e(t.interviewDate)||e(t.walkinDate)}))}if(w){const s=w.split(",").map(t=>t.trim().toLowerCase().replace(/\s+/g,"")).filter(t=>t.length>0);n=n.filter(t=>s.every(i=>{const e=a=>!a&&a!==0?!1:String(a).toLowerCase().replace(/\s+/g,"").includes(i);return e(t.name)||e(t.contactNumber)||e(t.company)||e(t.process)||e(t.status)}))}if(g&&(n=n.filter(s=>s.candidateName.toLowerCase().includes(g.toLowerCase())||s.contactNumber.toLowerCase().includes(g.toLowerCase()))),c&&(n=n.filter(s=>{var t;return s.candidateName.toLowerCase().includes(c.toLowerCase())||s.company.toLowerCase().includes(c.toLowerCase())||s.process.toLowerCase().includes(c.toLowerCase())||s.joiningType.toLowerCase().includes(c.toLowerCase())||s.contactNumber.toString().toLowerCase().includes(c.toLowerCase())||((t=s.incentiveSummary)==null?void 0:t.incentives.eligible.toString().toLowerCase().includes(c.toLowerCase()))})),d.startDate&&d.endDate){const s=C(d.startDate).startOf(D||"day"),t=C(d.endDate).endOf(D||"day");n=n.filter(i=>{const e=i.createdAt?C(i.createdAt):null,a=i.updatedAt?C(i.updatedAt):null,p=e&&e.isAfter(s)&&e.isBefore(t),r=a&&a.isAfter(s)&&a.isBefore(t);return p||r})}return f&&(n=[...n].sort((s,t)=>{const i=(r,l)=>l.split(".").reduce((N,J)=>N&&N[J]!==void 0?N[J]:null,r);let e=i(s,f),a=i(t,f);if(e==null)return u==="asc"?-1:1;if(a==null)return u==="asc"?1:-1;const p=r=>typeof r!="string"?!1:/^\d{4}-\d{1,2}-\d{1,2}|^\d{1,2}[/-]\d{1,2}[/-]\d{2,4}/.test(r);if(p(e)&&p(a)){const r=new Date(e),l=new Date(a);if(!isNaN(r)&&!isNaN(l))return u==="asc"?r.getTime()-l.getTime():l.getTime()-r.getTime()}if(e instanceof Date&&a instanceof Date)return u==="asc"?e.getTime()-a.getTime():a.getTime()-e.getTime();if(typeof e=="number"&&typeof a=="number")return u==="asc"?e-a:a-e;if(typeof e=="string"&&typeof a=="string"){const r=isNaN(parseFloat(e))?null:parseFloat(e),l=isNaN(parseFloat(a))?null:parseFloat(a);if(r!==null&&l!==null)return u==="asc"?r-l:l-r;e=e.toLowerCase(),a=a.toLowerCase()}return e<a?u==="asc"?-1:1:e>a?u==="asc"?1:-1:0})),n},[m,S,f,u,d.startDate,d.endDate,D,y,w,v,g,b,c,L]);o.useEffect(()=>{O(T)},[T]);const W=n=>{n&&typeof n.preventDefault=="function"?(n.preventDefault(),A(y.current.value)):A(n)},q=n=>{n&&typeof n.preventDefault=="function"?(n.preventDefault(),k(v.current.value)):k(n)},I=n=>{n&&typeof n.preventDefault=="function"?(n.preventDefault(),B(b.current.value)):B(n)};return{candidateRef:y,lineupsRef:v,walkinsRef:b,joiningsRef:L,dataTable:E,serviceData:T,isDisabled:P,setDataTable:O,handleSubmitCandidate:W,handleSubmitLineups:q,handleSubmitWalkins:I,handleSubmitJoinings:n=>{n&&typeof n.preventDefault=="function"?(n.preventDefault(),F(L.current.value)):F(n)},sortBy:f,sortOrder:u,dateRange:d,dateRangeType:D,setSortBy:j,setSortOrder:R,setDateRange:x,setDateRangeType:z,handleSortChange:n=>{f===n?R(u==="asc"?"desc":"asc"):(j(n),R("asc"))},handleDateRangeChange:(n,s)=>{x({startDate:n,endDate:s})},handleDateRangeTypeChange:n=>{z(n)},handleSubmitWalkins:I}};export{Y as u};
